# Stage 4: 디자인 평가 프롬프트

## 개요

렌더링된 슬라이드 이미지를 LLM이 평가.
품질 옵션에 따라 평가 기준이 다름.

## 품질별 평가 기준

### high (OOXML)
- 콘텐츠 적합성만 평가 (25점 만점)
- 합격: 20점 이상
- 레이아웃/타이포/색상은 원본 그대로이므로 스킵

### medium/low (HTML)
- 전체 100점 평가
- 합격: 85점 이상

## 평가 카테고리 (100점)

| 카테고리 | 배점 | 설명 |
|---------|-----|------|
| 레이아웃 | 25점 | 정렬, 여백, 균형 |
| 타이포그래피 | 20점 | 크기 계층, 가독성, 위계 |
| 색상 | 20점 | 대비, 조화, 강조 |
| 콘텐츠 적합성 | 25점 | 템플릿 매칭, 정보량 |
| 시각 요소 | 10점 | 아이콘, 이미지, 장식 |

## 입력

```yaml
slide_info:
  index: 3
  type: content
  template_id: card-4col-01
  attempt: 1

quality: medium

image_path: "output/slide-03-v1.png"
```

## 출력

```yaml
evaluation:
  scores:
    layout: 23
    typography: 18
    color: 19
    content_fit: 22
    visual: 8
  total: 90
  passed: true
  feedback: null
```

### 불합격 시

```yaml
evaluation:
  scores:
    layout: 18
    typography: 15
    color: 19
    content_fit: 12
    visual: 8
  total: 72
  passed: false
  feedback: |
    - 레이아웃: 카드 간 간격 불균일 (좌측 32px, 우측 24px)
    - 타이포: 본문 폰트 크기 불일치 (18pt, 16pt 혼용)
    - 콘텐츠: 4개 항목 중 2개가 너무 길어 2줄 넘침
```

## 평가 세부 기준

### 레이아웃 (25점)

**정렬 일관성 (10점)**
- 모든 요소가 그리드에 정렬
- 정렬 방식 혼용 금지
- 제목-본문-푸터 수직 정렬

**여백 균형 (8점)**
- 외곽 여백: 5~10%
- 요소 간 간격: 8의 배수
- 관련 정보 그룹핑

**시각적 균형 (7점)**
- 3분할 구도
- 시선 흐름 (Z/F 패턴)
- 한 슬라이드 한 메시지

### 타이포그래피 (20점)

**크기 계층 (8점)**
- 제목: 36~44pt
- 부제목: 24~28pt
- 본문: 18~24pt
- 캡션: 12~14pt

**가독성 (7점)**
- 줄간격: 1.4~1.6배
- 한 줄 40~60자
- 폰트 2~3종 제한

**위계 구조 (5점)**
- 제목/본문 크기 차이 1.5배+
- 굵기로 강조

### 색상 (20점)

**대비 (10점)**
- WCAG AA: 4.5:1 이상
- 다크그레이 본문 (#333)
- 밝은 배경 + 어두운 텍스트

**조화 (6점)**
- 포인트 컬러 1~2개
- 테마 색상 일관성

**강조 적절성 (4점)**
- 핵심 메시지에만 강조색

### 콘텐츠 적합성 (25점)

**템플릿 매칭 (15점)**
- 콘텐츠 유형과 템플릿 구조 일치
- 항목 수와 레이아웃 적합
- 데이터 유형과 시각화 일치

**정보량 (10점)**
- 본문 5줄 이하
- 핵심 메시지 명확
- 불필요 정보 제거

### 시각 요소 (10점)

**아이콘/이미지 (6점)**
- 스타일 통일 (Outline vs Filled)
- 해상도 적절
- 콘텐츠 관련성

**장식 요소 (4점)**
- 미묘한 그림자
- 모서리 둥글기 일관성
- 과도한 장식 지양

## 프롬프트 템플릿

```
당신은 프레젠테이션 디자인 전문가입니다.

슬라이드 이미지를 분석하세요.
[이미지 첨부]

평가 기준:
{evaluation_criteria}

품질 옵션: {quality}
- high: 콘텐츠 적합성만 평가 (25점 만점, 20점+ 합격)
- medium/low: 전체 평가 (100점 만점, 85점+ 합격)

출력 형식 (YAML):
evaluation:
  scores:
    layout: [0-25]
    typography: [0-20]
    color: [0-20]
    content_fit: [0-25]
    visual: [0-10]
  total: [합계]
  passed: [true/false]
  feedback: [불합격 시 구체적 개선점]
```

## 평가 루프

```
최대 3회 시도
  ↓
attempt 1 → 평가 → 합격? → 완료
  ↓ 불합격
attempt 2 → 피드백 반영 → 평가 → 합격? → 완료
  ↓ 불합격
attempt 3 → 피드백 반영 → 평가 → 합격? → 완료
  ↓ 불합격
3회 중 최고 점수 선택
```
