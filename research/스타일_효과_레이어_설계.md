# 스타일 효과 (Style Effects) 레이어 설계

> **상태**: 2차 개발 예정  
> **작성일**: 2026-01-11  

---

## 1. 개요

### 1.1 문제 정의

현재 시스템에서 **문서 양식에 테마가 내장**되어 있어 다음 조합이 불가능:

```
❌ "동국시스템즈 양식 + 글래스모피즘 효과"
❌ "기본 양식 + 네온 스타일"
```

### 1.2 해결 방안

**3계층 분리 아키텍처**:

```
PPT = 문서 양식 × 테마 × 스타일 효과
```

| 레이어 | 역할 | 정의 | 예시 |
|--------|------|------|------|
| **문서 양식** | 구조 | 마스터 레이아웃, 로고, 헤더/푸터 | dongkuk-systems |
| **테마** | 색상/폰트 | 색상 팔레트, 폰트 패밀리 | deep-green |
| **스타일 효과** | 렌더링 방식 | 시각적 처리 기법 | glassmorphism |

---

## 2. 테마 vs 스타일 효과

### 2.1 개념 비교

| 구분 | 테마 (Theme) | 스타일 효과 (Style) |
|------|-------------|-------------------|
| **정의** | **무슨 색/폰트**를 쓸지 | **어떻게 보여줄지** |
| **비유** | 물감 색상 | 칠하는 기법 |
| **저장 위치** | `templates/themes/` | `templates/styles/` |
| **파일** | `theme.yaml` | `style.yaml` |

### 2.2 시각적 예시

**같은 파란색(테마)으로 다른 스타일 적용:**

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  ████████████   │     │ ░░░░░░░░░░░░░░  │     │ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │
│  ████████████   │     │ ░░ 투명+블러 ░░  │     │ ▓▓ 그라데이션 ▓▓  │
│  ████████████   │     │ ░░░░░░░░░░░░░░  │     │ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │
└─────────────────┘     └─────────────────┘     └─────────────────┘
    스타일: flat          스타일: glass          스타일: gradient
```

---

## 3. 기본 제공 스타일

| ID | 이름 | 설명 | 적합한 상황 |
|----|------|------|------------|
| `flat` | 플랫 | 단색 배경, 그림자 없음 | 기업 공식 문서, 클린한 디자인 |
| `glassmorphism` | 글래스모피즘 | 투명 배경 + 블러 + 테두리 | 모던 UI, 테크 기업 |
| `neumorphism` | 뉴모피즘 | 내부 그림자 + 돌출 효과 | 앱 UI 소개, 제품 카탈로그 |
| `gradient` | 그라데이션 | 색상 그라데이션 배경 | 마케팅, 브랜딩 |
| `neon` | 네온 | 발광 효과 테두리 | 게임, 엔터테인먼트, 다크 모드 |

---

## 4. 스키마 정의

### 4.1 저장 구조

```
templates/styles/
├── flat/
│   ├── style.yaml      # 스타일 정의
│   └── thumbnail.png   # 미리보기
├── glassmorphism/
│   ├── style.yaml
│   └── thumbnail.png
└── neon/
    ├── style.yaml
    └── thumbnail.png
```

### 4.2 style.yaml 스키마

```yaml
# templates/styles/glassmorphism/style.yaml

id: glassmorphism
name: 글래스모피즘
description: 투명한 유리 효과로 모던하고 세련된 느낌

# CSS 변수 (콘텐츠 템플릿에 주입)
css_variables:
  --effect-blur: 12px
  --effect-opacity: 0.15
  --effect-border-opacity: 0.2
  --effect-shadow: "0 8px 32px rgba(0, 0, 0, 0.1)"
  --effect-border-radius: 16px

# 효과 플래그
effects:
  blur: true
  transparency: true
  border: true
  shadow: true
  gradient: false
  glow: false

# PPTX 도형 속성 매핑
pptx_mapping:
  fill:
    type: solid
    opacity: 15%      # 15% 불투명도
  line:
    color: "theme:surface"
    opacity: 20%
    width: 1pt
  shadow:
    enabled: true
    blur: 8pt
    offset_x: 0
    offset_y: 4pt
    color: "rgba(0,0,0,0.1)"

# 추천 테마 (잘 어울리는 테마)
recommended_themes:
  - deep-green
  - corporate-blue
  - sunset-gradient

# 적합한 배경
suitable_backgrounds:
  - gradient
  - image
  - solid-dark
```

### 4.3 플랫 스타일 예시

```yaml
# templates/styles/flat/style.yaml

id: flat
name: 플랫
description: 깔끔하고 단순한 기본 스타일

css_variables:
  --effect-blur: 0
  --effect-opacity: 1
  --effect-border-opacity: 0
  --effect-shadow: none
  --effect-border-radius: 4px

effects:
  blur: false
  transparency: false
  border: false
  shadow: false
  gradient: false
  glow: false

pptx_mapping:
  fill:
    type: solid
    opacity: 100%
  line:
    enabled: false
  shadow:
    enabled: false
```

### 4.4 네온 스타일 예시

```yaml
# templates/styles/neon/style.yaml

id: neon
name: 네온
description: 발광 효과로 어두운 배경에서 시선을 사로잡는 스타일

css_variables:
  --effect-blur: 0
  --effect-opacity: 0.9
  --effect-border-opacity: 1
  --effect-shadow: "0 0 20px var(--color-primary), 0 0 40px var(--color-primary)"
  --effect-border-radius: 8px
  --effect-glow-color: var(--color-primary)
  --effect-glow-intensity: 20px

effects:
  blur: false
  transparency: true
  border: true
  shadow: false
  gradient: false
  glow: true

pptx_mapping:
  fill:
    type: solid
    opacity: 90%
  line:
    color: "theme:primary"
    width: 2pt
    glow:
      enabled: true
      radius: 10pt
      color: "theme:primary"
  shadow:
    enabled: false

suitable_backgrounds:
  - solid-dark
  - black
```

---

## 5. Stage 1 질문 흐름 변경

### 5.1 새 질문 추가

**기존 질문 순서:**
1. 문서 종류
2. 문서 양식
3. 슬라이드 크기 (양식 없음 시)
4. 청중 대상
5. 발표 시간/슬라이드 수
6. 톤 & 스타일
7. 디자인 품질
8. 차트 렌더링 방식

**변경 후:**
1. 문서 종류
2. 문서 양식
3. 슬라이드 크기 (양식 없음 시)
4. 청중 대상
5. 발표 시간/슬라이드 수
6. 톤 & 스타일
7. 디자인 품질
8. **스타일 효과** (품질 medium/low 시) ← 🆕
9. 차트 렌더링 방식

### 5.2 질문 UI

```
[시스템] 시각적 효과를 선택해 주세요:

  1. 플랫 (Flat) - 단색, 깔끔한 기본 스타일 ← 기본
  2. 글래스모피즘 (Glassmorphism) - 투명 + 블러 효과
  3. 뉴모피즘 (Neumorphism) - 돌출/함몰 효과
  4. 그라데이션 (Gradient) - 색상 그라데이션
  5. 네온 (Neon) - 발광 효과 (어두운 배경용)

> 선택 (기본: 1): 
```

### 5.3 조건부 로직

| 조건 | 동작 |
|------|------|
| 품질 `high` 선택 | 스타일 효과 질문 **스킵** (OOXML 원본 사용) |
| 품질 `medium`/`low` 선택 | 스타일 효과 질문 **표시** |

---

## 6. 콘텐츠 템플릿 통합

### 6.1 CSS 변수 주입

콘텐츠 템플릿 HTML이 스타일 효과의 CSS 변수를 사용:

```html
<!-- template.html -->
<div class="card" style="
  backdrop-filter: blur(var(--effect-blur));
  background: rgba(var(--color-surface-rgb), var(--effect-opacity));
  border: 1px solid rgba(var(--color-border-rgb), var(--effect-border-opacity));
  box-shadow: var(--effect-shadow);
  border-radius: var(--effect-border-radius);
">
  <h3>{{title}}</h3>
  <p>{{description}}</p>
</div>
```

### 6.2 렌더링 파이프라인

```
1. 테마 로드 → 색상/폰트 CSS 변수 설정
2. 스타일 효과 로드 → 효과 CSS 변수 설정
3. 콘텐츠 템플릿 렌더링 → 변수 적용된 HTML 생성
4. HTML → PPTX 변환 → pptx_mapping 적용
```

---

## 7. PRD 수정 사항 (2차 개발 시)

### 7.1 수정 대상 섹션

| 섹션 | 수정 내용 |
|------|----------|
| 2.2 공유 리소스 | 스타일 효과 행 추가 |
| 3.1 저장 내용 | "2.5 스타일 효과 (styles/)" 섹션 추가 |
| 6.x 데이터 스키마 | 스타일 효과 스키마 섹션 추가 |
| Stage 1 질문 흐름 | 질문 8 (스타일 효과) 추가 |
| 조건부 로직 | 품질 high → 스킵 규칙 추가 |

### 7.2 CLAUDE.md 수정

```diff
| 유형 | 저장 위치 | 설명 |
|------|----------|------|
| 문서 양식 | `templates/documents/` | 회사별 양식 (OOXML) |
| 테마 | `templates/themes/` | 색상, 폰트 정의 |
+| 스타일 효과 | `templates/styles/` | 렌더링 효과 (글래스, 플랫 등) |
| 콘텐츠 | `templates/contents/` | 슬라이드 레이아웃 패턴 |
```

---

## 8. 구현 순서 (2차 개발)

1. **스키마 확정** - style.yaml 최종 스키마
2. **기본 스타일 생성** - flat, glassmorphism, gradient
3. **CSS 변수 시스템** - 콘텐츠 템플릿에 효과 변수 주입
4. **pptx_mapping 구현** - HTML 효과 → PPTX 도형 속성 변환
5. **Stage 1 질문 추가** - 품질 조건부 로직 포함
6. **PRD/CLAUDE.md 업데이트**

---

## 참고

- [idea.md - TODO 항목](../idea.md)
- [PRD - Stage 1 질문 흐름](../PRD_PPT_Skills_Suite.md#stage-1-질문-흐름)
